(this.webpackJsonpsupernova=this.webpackJsonpsupernova||[]).push([[3],{1245:function(e,t,n){"use strict";n.d(t,"a",(function(){return at}));var i,r=n(0),a=n(59);!function(e){e.EPUB="epub",e.PBK="pbk"}(i||(i={}));var c,o,l=n(44),s=n(9),d=n(43),u=n(52),b=n(42),j=n(1),f=function(e){return Object(u.createThemedComponent)(d.Button,{Button_borderRadius:e,Button_paddingHorizontal_medium:"26px",Button_backgroundColor_themePrimary:"#FFF",Button_color_themePrimary:function(e){return e.theme.vstui.color.primary.getShade(6)}})},h=b.default.div(c||(c=Object(l.a)(["\n  width: 100%;\n  display: flex;\n"]))),g=b.default.div(o||(o=Object(l.a)(["\n  ",";\n  ","\n\n  margin-right: -1px;\n  button {\n    position: relative;\n    &:focus {\n      z-index: 1;\n    }\n  }\n"])),(function(e){return"width: calc(".concat(100/e.buttonCount,"% + 1px)")}),(function(e){return e.active&&"\n    button {\n      background: ".concat(e.theme.vstui.color.primary.getShade(7),";\n      color: #fff;\n    }\n  ")})),m=f("4px 0 0 4px"),O=f("0 0 0 0"),x=f("0 4px 4px 0"),p=function(e){var t=e.btn,n=e.active,i=e.buttonCount;return Object(j.jsx)(g,{active:n,buttonCount:i,children:Object(j.jsx)(m,{"aria-current":n,onClick:t.onClick,iconStart:t.icon?Object(j.jsx)(t.icon,{}):void 0,label:t.label,fullWidth:!0,children:t.content})})},v=function(e){var t=e.btn,n=e.active,i=e.buttonCount;return Object(j.jsx)(g,{active:n,buttonCount:i,children:Object(j.jsx)(x,{"aria-current":n,onClick:t.onClick,label:t.label,fullWidth:!0,iconStart:t.icon?Object(j.jsx)(t.icon,{}):void 0,children:t.content})})},k=function(e){var t=e.buttons,n=void 0===t?[]:t,i=e.selectedButton;return Object(j.jsx)(h,{children:n.map((function(e,t){var r=1===n.length,a=0===t,c=t===n.length-1,o=n.length,l=Object(s.a)(Object(s.a)({},e),{},{onClick:function(){return e.onClick()}});return r?Object(j.jsx)(g,{active:t===i,buttonCount:o,children:Object(j.jsx)(d.Button,{"aria-current":t===i,fullWidth:!0,children:l.content})},l.label):a?Object(j.jsx)(p,{btn:l,active:t===i,buttonCount:o},l.label):c?Object(j.jsx)(v,{btn:l,active:t===i,buttonCount:o},l.label):function(e,t){return Object(j.jsx)(g,{active:t===i,buttonCount:n.length,onClick:e.onClick,children:Object(j.jsx)(O,{"aria-current":t===i,label:e.label,fullWidth:!0,children:e.content})},e.label)}(l,t)}))})},y=n(47),C=function(){return Object(j.jsx)(d.Icon,{width:76,height:52,children:Object(j.jsx)("g",{stroke:y.cloud.getShade(5),strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinecap:"square",children:Object(j.jsx)("path",{d:"M9 45h58M9 32h58M9 20h58M9 9h58"})})})},S=function(){return Object(j.jsx)(d.Icon,{width:76,height:52,children:Object(j.jsx)("g",{stroke:y.cloud.getShade(5),strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinecap:"square",children:Object(j.jsx)("path",{d:"M9 45h58M9 36h58M9 27h58M9 18h58M9 9h58"})})})},M=function(){return Object(j.jsx)(d.Icon,{width:76,height:52,children:Object(j.jsx)("g",{stroke:y.cloud.getShade(5),strokeWidth:2,fill:"none",fillRule:"evenodd",strokeLinecap:"square",children:Object(j.jsx)("path",{d:"M9 45h58M9 39h58M9 33h58M9 27h58M9 21h58M9 15h58M9 9h58"})})})},w=function(){return Object(j.jsx)(d.Icon,{width:76,height:52,children:Object(j.jsx)("rect",{width:"24",height:"40",x:"25",y:"6",fill:y.cloud.getShade(5)})})},_=function(){return Object(j.jsx)(d.Icon,{width:76,height:52,children:Object(j.jsx)("rect",{width:"40",height:"40",x:"18",y:"6",fill:y.cloud.getShade(5)})})},B=function(){return Object(j.jsx)(d.Icon,{width:76,height:52,children:Object(j.jsx)("rect",{width:"60",height:"40",x:"8",y:"6",fill:y.cloud.getShade(5)})})},F=n(1373),E=n(1374),L=n(1291),z=n(1255),I=n(1292),P=n(1293),T=n(1294),R=n(1295),A=n(48),N=n(173);var H,D,W,G,V,U,Z,Y,q,X,J,K=n(50),Q="".concat(24,"px"),$="8px ".concat(24,"px 24px"),ee=function(e,t,n){return Object(u.createThemedComponent)(d.Button,{Button_borderWidth:"1px",Button_borderColor_themePrimary:n||"transparent",Button_borderColor_themePrimary_focus:n||"transparent",Button_borderColor_themePrimary_hover:n||"transparent",Button_backgroundColor_themePrimary:e,Button_backgroundColor_themePrimary_active:e,Button_backgroundColor_themePrimary_focus:e,Button_backgroundColor_themePrimary_hover:e,Button_color_themePrimary:t,Button_color_themePrimary_focus:t,Button_color_themePrimary_hover:t,Button_color_themePrimary_active:t})},te=ee("#FFF",y.cloud.getShade(9),y.cloud.getShade(5)),ne=ee(y.ninja.getShade(9),"#FFF"),ie=ee("#e7dcd1","#493420"),re=ee("#d8e8f0","#3c3c3c"),ae=Object(u.createThemedComponent)(d.Button,{Button_borderWidth:"1px",Button_borderColor_themePrimaryNaked:y.cloud.getShade(5),Button_borderColor_themePrimaryNaked_focus:y.cloud.getShade(5),Button_borderColor_themePrimaryNaked_hover:y.cloud.getShade(5)}),ce={fonts:[{key:"default",value:z.a.DEFAULT},{key:"sansSerif",value:z.a.SANS},{key:"oldStyle",value:z.a.OLD_STYLE},{key:"modern",value:z.a.MODERN},{key:"humanist",value:z.a.HUMANIST},{key:"monospace",value:z.a.MONO},{key:"openDyslexic",value:z.a.DYSLEXIC},{key:"hyperlegible",value:z.a.HYPERLEGIBLE}],lineHeightSizes:[{key:"small",value:z.e.SMALL,img:M},{key:"medium",value:z.e.MEDIUM,img:S},{key:"large",value:z.e.LARGE,img:C}],marginSizes:[{key:"small",value:z.i.SMALL,img:B},{key:"medium",value:z.i.MEDIUM,img:_},{key:"large",value:z.i.LARGE,img:w}],modes:[{key:z.c.DAY,button:te},{key:z.c.NIGHT,button:ne},{key:z.c.SEPIA,button:ie},{key:z.c.CYAN,button:re}],fontSizes:[{size:1},{size:1.5},{size:2},{size:4}]},oe=Object(b.css)(H||(H=Object(l.a)(["\n  outline: none;\n  transform: scale(1.04);\n  ","\n"])),(function(e){return e.theme&&"box-shadow: 0 3px 5px 0 #0003, 0 0 0 2px #fff, 0 0 0 4px ".concat(e.theme.vstui.color.primary.getShade(6),";")})),le=Object(b.css)(D||(D=Object(l.a)(["\n  outline: none;\n  border-color: transparent;\n  ","\n"])),(function(e){return e.theme&&"box-shadow: 0 0 0 4px ".concat(e.theme.vstui.color.primary.getShade(6),";")})),se=Object(b.css)(W||(W=Object(l.a)(["\n  outline: none;\n  transform: scale(1.04);\n  border-color: transparent;\n  ","\n"])),(function(e){return e.theme&&"box-shadow: 0 0 0 4px ".concat(e.theme.vstui.color.primary.getShade(6),", 0 0 0 6px #fff, 0 0 0 8px ").concat(e.theme.vstui.color.primary.getShade(6),";")})),de={SelectedContainer:b.default.div(G||(G=Object(l.a)(["\n    ","\n    ","\n    button {\n      padding: 4px 0px;\n      :hover:not(:disabled) {\n        transform: scale(1.04);\n        box-shadow: 0 3px 5px 0 #0003;\n        :focus {\n          transform: scale(1.04);\n          ","\n          ","\n        }\n        ","\n      }\n      :focus {\n        ","\n        ","\n      }\n      ","\n      svg {\n        width: auto;\n        height: auto;\n        rect {\n          ","\n        }\n        g {\n          ","\n        }\n      }\n    }\n  "])),(function(e){return e.flex&&"\n        flex: 1;\n      "}),(function(e){return e.border&&"\n        display: flex;\n        align-items: center;\n        margin: 0 1px;\n      "}),oe,(function(e){return e.active&&se}),(function(e){return e.active&&le}),oe,(function(e){return e.active&&se}),(function(e){return e.active&&le}),(function(e){return e.active&&"fill: ".concat(e.theme.vstui.color.primary.getShade(6),";")}),(function(e){return e.active&&"stroke: ".concat(e.theme.vstui.color.primary.getShade(6),";")})),Footer:b.default.div(V||(V=Object(l.a)(["\n    text-align: center;\n    border-top: 1px solid ",";\n    padding: 12px 16px 0 16px;\n    margin-top: auto;\n\n    ","\n  "])),y.cloud.getShade(3),(function(e){return e.isTinyScreen&&"margin-bottom: 30px;"})),MenuSection:b.default.div(U||(U=Object(l.a)(["\n    padding: ",";\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    & > * {\n      margin: 0 8px;\n      &:first-child {\n        margin-left: 0;\n      }\n      &:last-child {\n        margin-right: 0;\n      }\n    }\n  "])),$),MenuContainer:b.default.div(Z||(Z=Object(l.a)(["\n    width: calc(100% + ","px);\n    margin: 0 -",";\n    display: flex;\n    flex-direction: column;\n  "])),48,Q),MenuSectionsContainer:b.default.div(Y||(Y=Object(l.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    & > * {\n      flex: 1;\n      margin: 0;\n    }\n\n    ","\n  "])),(function(e){return e.isTinyScreen&&"flex-direction: column;"})),ResetLink:b.default.div(q||(q=Object(l.a)(["\n    padding-top: 2px;\n  "]))),Header:b.default.h3(X||(X=Object(l.a)(["\n    font-size: 1.5rem;\n    line-height: 1.8rem;\n    font-weight: 500;\n    padding: 0 ",";\n  "])),Q),FontContainer:b.default.div(J||(J=Object(l.a)(["\n    margin-bottom: -20px;\n    width: 100%;\n  "])))},ue=function(e){var t=e.isTinyScreen,n=e.className,i=Object(F.a)(),r=Object(L.a)(),a=Object(I.a)(),c=Object(P.a)(),o=Object(T.a)(),l=Object(R.a)(),s=function(){var e=Object(A.c)();return{resetFormatting:function(){e(Object(N.a)(!0))}}}(),u=Object(K.b)();return Object(j.jsxs)(de.MenuContainer,{"data-testid":"enhanced_menu",className:n,children:[Object(j.jsx)(de.Header,{children:Object(j.jsx)(E.a,{id:"format.textSize"})}),Object(j.jsx)(de.MenuSection,{children:Object(j.jsx)(k,{selectedButton:l.currentFontSize.enabled?ce.fontSizes.findIndex((function(e){return e.size===l.currentFontSize.value})):-1,buttons:[{label:i.formatMessage({id:"format.textSize.small"}),content:Object(j.jsx)("div",{style:{fontSize:12},children:"Aa"}),onClick:function(){return l.setFontSize(z.d.SMALL)}},{label:i.formatMessage({id:"format.textSize.normal"}),content:Object(j.jsx)("div",{style:{fontSize:16},children:"Aa"}),onClick:function(){return l.setFontSize(z.d.MEDIUM)}},{label:i.formatMessage({id:"format.textSize.large"}),content:Object(j.jsx)("div",{style:{fontSize:19},children:"Aa"}),onClick:function(){return l.setFontSize(z.d.LARGE)}},{label:i.formatMessage({id:"format.textSize.extraLarge"}),content:Object(j.jsx)("div",{style:{fontSize:22},children:"Aa"}),onClick:function(){return l.setFontSize(z.d.EXTRA_LARGE)}}]})}),Object(j.jsx)(de.Header,{children:Object(j.jsx)(E.a,{id:"format.font"})}),Object(j.jsx)(de.MenuSection,{children:Object(j.jsx)(de.FontContainer,{children:Object(j.jsx)(d.Select,{label:i.formatMessage({id:"format.fontStyle"}),labelHidden:!0,onChange:function(e){r.setFont(e.target.value)},fullWidth:!0,value:r.currentFont.value,children:ce.fonts.map((function(e){return Object(j.jsx)("option",{value:e.value,children:i.formatMessage({id:"format.font.".concat(e.key)})},e.key)}))})})}),Object(j.jsx)(de.Header,{children:Object(j.jsx)(E.a,{id:"format.mode"})}),Object(j.jsx)(de.MenuSection,{children:ce.modes.map((function(e){return Object(j.jsx)(de.SelectedContainer,{active:a.currentMode.value===e.key,flex:!0,children:Object(j.jsx)(e.button,{"aria-current":a.currentMode.value===e.key,fullWidth:!0,onClick:function(){return a.setMode(e.key)},children:i.formatMessage({id:"format.mode.".concat(e.key)})})},e.key)}))}),Object(j.jsxs)(de.MenuSectionsContainer,{isTinyScreen:t,children:[u.getProp("ContentControls.Margin.enabled")&&Object(j.jsxs)("div",{children:[Object(j.jsx)(de.Header,{children:Object(j.jsx)(E.a,{id:"format.margin"})}),Object(j.jsx)(de.MenuSection,{children:ce.marginSizes.map((function(e){return Object(j.jsx)(de.SelectedContainer,{border:!0,flex:!0,active:c.currentMargin.value===e.value,children:Object(j.jsx)(ae,{naked:!0,inline:!0,fullWidth:!0,"aria-current":c.currentMargin.value===e.value,label:i.formatMessage({id:"format.margin.".concat(e.key)}),onClick:function(){return c.setMargin(e.value)},children:Object(j.jsx)(e.img,{})})},e.key)}))})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)(de.Header,{children:Object(j.jsx)(E.a,{id:"format.lineHeight"})}),Object(j.jsx)(de.MenuSection,{children:ce.lineHeightSizes.map((function(e){return Object(j.jsx)(de.SelectedContainer,{border:!0,flex:!0,active:o.currentLineHeight.value===e.value,children:Object(j.jsx)(ae,{naked:!0,inline:!0,fullWidth:!0,"aria-current":o.currentLineHeight.value===e.value,label:i.formatMessage({id:"format.lineHeight.".concat(e.key)}),onClick:function(){return o.setLineHeight(e.value)},children:Object(j.jsx)(e.img,{})})},e.key)}))})]})]}),Object(j.jsxs)(de.Footer,{isTinyScreen:t,children:[Object(j.jsx)(E.a,{id:"format.lookRight"}),Object(j.jsx)(de.ResetLink,{children:Object(j.jsx)(d.Button,{inline:!0,onClick:s.resetFormatting,"data-interaction-id":"preferences_CC_Reset",children:Object(j.jsx)(E.a,{id:"format.reset"})})})]})]})},be=n(46),je=n(51),fe=n(125);function he(e){return e.contentControls.basic}function ge(e){return he(e).zoom}function me(e){return he(e).pageFit}function Oe(e){return he(e).pageLayout}var xe=n(53),pe=n(54),ve=Object(xe.e)(pe.a.SET_ZOOM),ke=(Object(xe.e)(pe.a.GET_ZOOM),Object(xe.e)(pe.a.ZOOM_IN)),ye=Object(xe.e)(pe.a.ZOOM_OUT),Ce=Object(xe.e)(pe.a.FIT_WIDTH),Se=Object(xe.e)(pe.a.FIT_HEIGHT),Me=Object(xe.e)(pe.a.SET_LAYOUT_MODE);var we=n(1377),_e=n(11),Be=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(je.Page,{style:{marginRight:"3px",transform:"scale(-1, 1)"}}),Object(j.jsx)(je.Page,{})]})},Fe=function(){var e=Object(F.a)(),t=function(){var e=Object(A.d)(Oe),t=Object(A.c)();return{currentMode:e,setMode:function(e){t(Me(e))}}}(),n=t.currentMode,i=t.setMode;return Object(j.jsx)(k,{selectedButton:n===we.b.DOUBLE?1:0,buttons:[{icon:je.Page,label:e.formatMessage({id:"format.onePage"}),onClick:function(){i(we.b.SINGLE),Object(_e.b)("facing_pages_off")}},{icon:Be,label:e.formatMessage({id:"format.twoPage"}),onClick:function(){i(we.b.DOUBLE),Object(_e.b)("facing_pages_on")}}]})};function Ee(){var e=Object(r.useRef)(document.getElementsByClassName("night-mode").length>0);return{isNightModeActive:e.current,toggleNightMode:function(){document.getElementsByClassName("night-mode").length?(document.getElementsByClassName("night-mode")[0].remove(),e.current=!1):function(){var t=document.createElement("div");t.classList.add("night-mode"),t.setAttribute("style","\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  pointer-events: none;\n  background-color: rgba(250, 200, 155, 0.4);\n  z-index: 9999;\n"),document.body.appendChild(t),e.current=!0}()}}}var Le,ze,Ie,Pe,Te,Re,Ae,Ne,He,De,We,Ge,Ve,Ue,Ze,Ye,qe=n(1434),Xe=n(60),Je=n(55),Ke="".concat(24,"px"),Qe="15px ".concat(24,"px"),$e=Object(b.css)(Le||(Le=Object(l.a)(["\n  outline: none;\n  border-radius: 4px;\n  box-shadow: 0 0 0 2px #fff, 0 0 0 4px ",";\n"])),Object(Je.f)(6)),et=Object(b.css)(ze||(ze=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),tt={MenuContainer:b.default.div(Ie||(Ie=Object(l.a)(["\n    width: calc(100% + ","px);\n    margin: 0 -",";\n  "])),48,Ke),GreyBlockHeight:b.default.div(Pe||(Pe=Object(l.a)(["\n    background: ",";\n    width: 70%;\n    height: 37px;\n    ","\n  "])),y.cloud.getShade(6),et),GreyBlockWidth:b.default.div(Te||(Te=Object(l.a)(["\n    background: ",";\n    width: 100%;\n    height: 25px;\n    ","\n  "])),y.cloud.getShade(6),et),MenuContentContainer:b.default.div(Re||(Re=Object(l.a)(["\n    padding: 0 ","px;\n    display: block;\n  "])),24),LeftButtonContent:b.default.span(Ae||(Ae=Object(l.a)(["\n    ","\n    height: 45px;\n    width: 50px;\n    padding: 4px;\n    border: 1px solid ",";\n    border-radius: 4px;\n  "])),et,y.cloud.getShade(5)),RightButtonContent:b.default.span(Ne||(Ne=Object(l.a)(["\n    align-items: center;\n    display: flex;\n    padding: 0 10px 0 15px;\n    place-content: space-between;\n    width: 100%;\n  "]))),ButtonTextContainer:b.default.span(He||(He=Object(l.a)(["\n    max-width: 90%;\n  "]))),FitButton:b.default.button(De||(De=Object(l.a)(["\n    ","\n    width: 100%;\n    :focus {\n      ",'\n    }\n    &[aria-current="true"] {\n      div {\n        background: ',";\n      }\n    }\n  "])),et,$e,Object(Je.f)(6)),Header:b.default.h3(We||(We=Object(l.a)(["\n    font-size: 1.5rem;\n    line-height: 1.8rem;\n    font-weight: 500;\n    padding: 15px ",";\n\n    + div {\n      padding-top: 0;\n    }\n  "])),Ke),MenuSection:b.default.div(Ge||(Ge=Object(l.a)(["\n    position: relative;\n    padding: ",";\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    border-bottom: 1px solid ",";\n    & > * {\n      margin: 0 8px;\n      &:first-child {\n        margin-left: 0;\n      }\n      &:last-child {\n        margin-right: 0;\n        flex-shrink: 0;\n      }\n    }\n  "])),Qe,y.cloud.getShade(4)),PageViewContainer:b.default.div(Ve||(Ve=Object(l.a)(["\n    border-bottom: 1px solid ",";\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: ",";\n  "])),y.cloud.getShade(4),Qe),PageViewDivider:b.default.span(Ue||(Ue=Object(l.a)(["\n    background-color: ",";\n    height: 1px;\n    margin: 10px 0;\n    width: 100%;\n  "])),y.cloud.getShade(4)),Description:b.default.p(Ze||(Ze=Object(l.a)(["\n    color: ",";\n    font-size: 1.3rem;\n    line-height: 1.6rem;\n  "])),y.cloud.getShade(6)),TextSection:b.default.div(Ye||(Ye=Object(l.a)(["\n    width: 339px;\n    margin-right: 40px;\n    flex: 1;\n\n    h3 {\n      padding: 0;\n      margin-bottom: 4px;\n    }\n  "])))},nt=Object(Xe.a)(),it=function(e){var t=e.fitTo,n=e.theme,i=e.pageFit,r=function(e){return e.active&&Object(j.jsx)(d.Icon,{height:13,width:13,children:Object(j.jsx)(je.Checkmark,{color:n.vstui.color.primary.getShade(6)})})},a={height:{isActive:"height"===i.currentPageFit,onClick:i.fitHeight,icon:Object(j.jsx)(tt.GreyBlockHeight,{}),text:"format.fitHeight"},width:{isActive:"width"===i.currentPageFit,onClick:i.fitWidth,icon:Object(j.jsx)(tt.GreyBlockWidth,{}),text:"format.fitWidth"}};return Object(j.jsxs)(tt.FitButton,{"aria-current":a[t].isActive,onClick:a[t].onClick,children:[Object(j.jsx)(tt.LeftButtonContent,{children:a[t].icon}),Object(j.jsxs)(tt.RightButtonContent,{children:[Object(j.jsx)(tt.ButtonTextContainer,{children:Object(j.jsx)(E.a,{id:a[t].text})}),Object(j.jsx)(r,{active:a[t].isActive})]})]})},rt=Object(b.withTheme)((function(e){var t=e.theme,n=e.className,c=Object(F.a)(),o=function(){var e=Object(A.c)();return{currentZoom:Object(A.d)(ge),setZoom:function(t){e(ve(t))},zoomIn:function(){e(ke())},zoomOut:function(){e(ye())}}}(),l=function(){var e=Object(A.c)();return{currentPageFit:Object(A.d)(me),fitWidth:function(){e(Ce())},fitHeight:function(){e(Se())}}}(),s=Object(a.a)().bookInfo,u=Ee(),b=u.isNightModeActive,f=u.toggleNightMode,h=Object(r.useState)(o.currentZoom),g=Object(be.a)(h,2),m=g[0],O=g[1],x=Object(fe.b)(300,(function(e){o.setZoom(e)}));return Object(r.useEffect)((function(){O(o.currentZoom)}),[o.currentZoom]),Object(j.jsxs)(tt.MenuContainer,{"data-testid":"basic_menu",className:n,children:[Object(j.jsx)(tt.MenuSection,{children:Object(j.jsx)(qe.a,{decreaseButtonLabel:c.formatMessage({id:"format.zoomOut"}),increaseButtonLabel:c.formatMessage({id:"format.zoomIn"}),label:c.formatMessage({id:"format.zoom"}),labelWrappedWithTag:"h3",min:.25,max:4,onChange:function(e){O(e),x(e)},step:.25,value:m})}),s.vbkType===i.PBK&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(tt.Header,{children:Object(j.jsx)(E.a,{id:"format.pageView"})}),Object(j.jsxs)(tt.PageViewContainer,{children:[Object(j.jsx)(it,{fitTo:"height",theme:t,pageFit:l}),Object(j.jsx)(tt.PageViewDivider,{}),Object(j.jsx)(it,{fitTo:"width",theme:t,pageFit:l})]})]}),Object(j.jsxs)(tt.MenuSection,{children:[Object(j.jsxs)(tt.TextSection,{id:nt,children:[Object(j.jsx)(tt.Header,{children:Object(j.jsx)(E.a,{id:"format.nightDisplay"})}),Object(j.jsx)(tt.Description,{children:Object(j.jsx)(E.a,{id:"format.nightDisplayDescription"})})]}),Object(j.jsx)(d.Switch,{defaultPressed:b,id:nt,labelledBy:nt,onClick:f,size:"small"})]}),s.dpsAvailable&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(tt.Header,{children:Object(j.jsx)(E.a,{id:"format.pageView"})}),Object(j.jsx)(tt.MenuContentContainer,{children:Object(j.jsx)(Fe,{})})]})]})}));function at(e){var t=e.isTinyScreen,n=void 0!==t&&t,r=e.className,c=void 0===r?"":r,o=Object(a.a)().bookInfo;return o.vbkType!==i.EPUB||o.isFixedLayout?Object(j.jsx)(rt,{className:c}):Object(j.jsx)(ue,{className:c,isTinyScreen:n})}},1291:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(48),r=n(192),a=n(173);function c(){var e=Object(i.c)();return{currentFont:Object(i.d)(r.b),setFont:function(t){e(Object(a.c)(t))}}}},1292:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(48),r=n(192),a=n(173);function c(){var e=Object(i.c)();return{currentMode:Object(i.d)(r.a),setMode:function(t){e(Object(a.b)(t))}}}},1293:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(48),r=n(192),a=n(173);function c(){var e=Object(i.c)();return{currentMargin:Object(i.d)(r.e),setMargin:function(t){e(Object(a.e)(t))}}}},1294:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(48),r=n(192),a=n(173);function c(){var e=Object(i.c)();return{currentLineHeight:Object(i.d)(r.d),setLineHeight:function(t){e(Object(a.d)(t))}}}},1295:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(48),r=n(192),a=n(173);function c(){var e=Object(i.c)();return{currentFontSize:Object(i.d)(r.c),setFontSize:function(t){e(Object(a.f)(t))}}}},1297:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(48),r=n(1262),a=n(1261),c=n(0);function o(e){var t=Object(i.c)(),n=Object(i.d)(r.d);return Object(c.useEffect)((function(){t(Object(a.k)(e))}),[e,t]),{status:n,play:function(){return t(Object(a.g)())},pause:function(){return t(Object(a.f)())},stop:function(){return t(Object(a.p)())},resume:function(){return t(Object(a.j)())},skipForward:function(){return t(Object(a.o)())},skipBack:function(){return t(Object(a.n)())},playFromLocation:function(e){return t(Object(a.i)({location:e}))},playFromCurrentSelection:function(){return t(Object(a.h)())}}}},130:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l}));var i,r=n(46),a=n(0);function c(){window.dispatchEvent(new CustomEvent(i.OPEN))}function o(){window.dispatchEvent(new CustomEvent(i.CLOSE))}function l(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(a.useCallback)((function(){c(!0)}),[c]),l=Object(a.useCallback)((function(){c(!1)}),[c]);return Object(a.useEffect)((function(){return window.addEventListener(i.OPEN,o),function(){window.removeEventListener(i.OPEN,o)}}),[o]),Object(a.useEffect)((function(){return window.addEventListener(i.CLOSE,l),function(){window.removeEventListener(i.CLOSE,l)}}),[l]),n}!function(e){e.OPEN="tts-open",e.CLOSE="tts-close"}(i||(i={}))},1341:function(e,t,n){"use strict";var i=n(46),r=n(44),a=n(0),c=n(51),o=n(42),l=n(43),s=n(47),d=n(125),u=n(1373),b=n(1374),j=n(48),f=n(1262),h=n(1261);var g,m,O,x,p,v,k,y,C,S=n(1434),M=n(11),w=n(203),_=n(1),B={Note:o.default.div(g||(g=Object(r.a)(["\n    font-style: italic;\n    font-size: 1.2rem;\n    margin-top: -12px;\n    margin-bottom: -6px;\n  "]))),CheckboxContainer:o.default.div(m||(m=Object(r.a)(["\n    margin: 24px 0;\n    margin-bottom: -3px;\n  "]))),Header:o.default.h3(O||(O=Object(r.a)(["\n    background: ",";\n    color: ",";\n    padding: 6px 17px;\n    border-bottom: 1px solid ",";\n    font-size: 1.5rem;\n    font-weight: 500;\n  "])),s.cloud.getShade(2),s.cloud.getShade(9),s.cloud.getShade(3)),InnerContent:o.default.div(x||(x=Object(r.a)(["\n    padding: 0px 0px 0 0px;\n  "]))),SliderContainer:o.default.div(p||(p=Object(r.a)(["\n    padding-bottom: 16px;\n  "]))),MainHeader:o.default.h3(v||(v=Object(r.a)(["\n    background: ",";\n    color: ",";\n    padding: 6px 16px;\n    border-bottom: 1px solid ",";\n    font-size: 1.5rem;\n    font-weight: 500;\n  "])),s.cloud.getShade(2),s.cloud.getShade(9),s.cloud.getShade(3)),Footer:o.default.div(k||(k=Object(r.a)(["\n    border-top: 1px solid ",";\n    margin-top: 18px;\n    margin-bottom: 14px;\n    font-size: 1.4rem;\n    text-align: left;\n    line-height: 1.7rem;\n  "])),s.cloud.getShade(4)),Message:o.default.div(y||(y=Object(r.a)(["\n    margin-top: 14px;\n  "]))),LinkText:o.default.div(C||(C=Object(r.a)(["\n    margin-top: 5px;\n  "])))};function F(e){var t=e.open,n=e.closeDialog,r=function(){var e=Object(j.c)(),t=Object(j.d)(f.a),n=Object(j.d)(f.b),i=Object(j.d)(f.c),r=Object(j.d)(f.e),c=Object(j.d)(f.f);return Object(a.useEffect)((function(){if(r.length&&i&&i!==r[n].name){var e=r.findIndex((function(e){return e.name===i}));Object(h.m)(e)}}),[r,i,n]),Object(a.useEffect)((function(){0===r.length&&(e(Object(h.d)()),e(Object(h.e)()))}),[e,r]),{rate:t,voiceIndex:n,voices:r,altEnabled:c,setVoiceIndex:function(t){return e(Object(h.m)(t))},setRate:function(t){return e(Object(h.l)(t))},enableAltText:function(){return e(Object(h.c)())},disableAltText:function(){return e(Object(h.b)())}}}(),c=Object(a.useState)(r.rate),o=Object(i.a)(c,2),s=o[0],g=o[1],m=Object(u.a)(),O=Object(w.a)();var x=Object(d.b)(300,(function(e){r.setRate(e),Object(M.b)("tts_speed",{selected_speed:e})}));return Object(_.jsx)(l.Dialog,{open:t,title:m.formatMessage({id:"tts.readAloudSettings"}),darkHeader:!O,onRequestClose:n,size:"large",children:Object(_.jsxs)(B.InnerContent,{children:[Object(_.jsx)(B.SliderContainer,{children:Object(_.jsx)(S.a,{decreaseButtonLabel:m.formatMessage({id:"tts.decreaseRate"}),increaseButtonLabel:m.formatMessage({id:"tts.increaseRate"}),label:m.formatMessage({id:"tts.readingSpeed"}),min:0,max:1,onChange:function(e){g(e),x(e)},step:.1,value:s})}),Object(_.jsx)(l.Select,{label:m.formatMessage({id:"tts.changeVoice"}),onChange:function(e){var t=parseInt(e.currentTarget.value,10);r.setVoiceIndex(t)},value:r.voiceIndex,fullWidth:!0,children:r.voices.map((function(e,t){return Object(_.jsxs)("option",{value:t,children:[e.name," (",e.lang,")"]},e.name)}))}),Object(_.jsx)(B.Note,{children:Object(_.jsx)(b.a,{id:"tts.voiceChangeNotLangChange"})}),Object(_.jsx)(B.CheckboxContainer,{children:Object(_.jsx)(l.Checkbox,{label:m.formatMessage({id:"tts.readAltText"}),onChange:function(){r.altEnabled?r.disableAltText():r.enableAltText()},checked:r.altEnabled})}),Object(_.jsxs)(B.Footer,{children:[Object(_.jsx)(B.Message,{children:Object(_.jsx)(b.a,{id:"tts.footerMessage"})}),Object(_.jsx)(B.LinkText,{children:Object(_.jsx)(b.a,{id:"tts.viewCommitment",values:{link:function(e){return Object(_.jsx)(l.Button,{inline:!0,href:m.formatMessage({id:"tts.footerURL"}),target:"_blank",children:e})}}})})]})]})})}var E,L,z,I,P=n(76),T=n(1297),R=n(1263),A=n(130),N=n(96),H=Object(o.keyframes)(E||(E=Object(r.a)(["\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n"]))),D={ControlContainer:o.default.div(L||(L=Object(r.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 0.6rem;\n    align-items: center;\n    background: ",";\n    border: 1px solid ",";\n    border-radius: 2.4rem;\n    min-width: 21rem;\n    > * {\n      animation: "," 0.1s;\n    }\n  "])),s.frost.getShade(1),s.frost.getShade(3),H),MiddleContainer:o.default.div(z||(z=Object(r.a)(["\n    display: flex;\n    justify-content: space-between;\n    max-width: 12.4rem;\n    flex: 1;\n    margin: 0 10px;\n  "]))),IconButton:Object(o.default)(l.IconButton)(I||(I=Object(r.a)(["\n    svg {\n      transform: scale(",");\n    }\n  "])),(function(e){return e.large?1.4:1}))},W=Object(o.withTheme)((function(e){var t=e.onClick,n=e.label,i=e["data-interaction-id"],r=e.icon,a=e.large,c=void 0!==a&&a,o=e.theme.vstui.color.primary.getShade(6);return Object(_.jsx)(D.IconButton,{onClick:t,rounded:!0,label:Object(P.c)(n),"data-interaction-id":i,icon:r,size:"small",large:c,color:"custom",customIconColor:s.cloud.getShade(10),customIconFocusColor:o,customIconFocusBGColor:!0})}));t.a=function(e){var t=e.size,n=void 0===t?"300px":t,r=Object(u.a)(),o=Object(T.a)(r.formatMessage({id:"tts.cantRead"})),l=Object(a.useState)(!1),s=Object(i.a)(l,2),d=s[0],b=s[1];return Object(_.jsxs)(D.ControlContainer,{style:{width:n},children:[Object(_.jsx)(F,{open:d,closeDialog:function(){return b(!1)}}),Object(_.jsx)(W,{icon:Object(_.jsx)(c.Gear,{}),onClick:function(){return b(!0)},label:r.formatMessage({id:"tts.readAloudSettings"})}),Object(_.jsxs)(D.MiddleContainer,{children:[Object(_.jsx)(W,{label:r.formatMessage({id:"tts.skipBack"}),onClick:o.skipBack,icon:Object(_.jsx)(c.SkipBack,{})}),Object(_.jsx)(N.a,{children:o.status===R.a.PLAYING?Object(_.jsx)(W,{label:r.formatMessage({id:"base.pause"}),onClick:o.pause,"data-interaction-id":"tts_pause",icon:Object(_.jsx)(c.Pause,{}),large:!0}):Object(_.jsx)(W,{label:r.formatMessage({id:"base.play"}),onClick:o.play,"data-interaction-id":"tts_play",icon:Object(_.jsx)(c.Play,{}),large:!0})}),Object(_.jsx)(W,{label:r.formatMessage({id:"tts.skipForward"}),onClick:o.skipForward,icon:Object(_.jsx)(c.SkipForward,{})})]}),Object(_.jsx)(W,{icon:Object(_.jsx)(c.XSmall,{}),onClick:function(){o.stop(),Object(A.a)()},label:r.formatMessage({id:"base.close"}),"data-interaction-id":"tts_stop"})]})}},1434:function(e,t,n){"use strict";var i,r,a,c,o,l,s,d,u=n(21),b=n(22),j=n(24),f=n(23),h=n(44),g=n(0),m=n(51),O=n(42),x=n(47),p=n(60),v=n(1),k={trackStyles:Object(O.css)(i||(i=Object(h.a)(["\n    height: ","px;\n    border-radius: ","px;\n    background-color: rgba(0, 0, 0, 0.2);\n  "])),4,4),thumbStyles:Object(O.css)(r||(r=Object(h.a)(["\n    appearance: none;\n    height: ","px;\n    width: ","px;\n    border-radius: ","px;\n    background: white;\n    box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.27);\n    border: 1px solid ",";\n  "])),24,24,24,x.cloud.getShade(4))},y={RangeInput:O.default.input(a||(a=Object(h.a)(["\n    appearance: none;\n    width: 100%;\n    height: ","px;\n    margin: 0;\n    border: 0;\n    cursor: pointer;\n    position: relative;\n    &:focus {\n      border: 0;\n      border-radius: 2px;\n      box-shadow: 0 0 0 2px\n        ",";\n      outline: none;\n    }\n    /* These get cranky if you use shared declarations, so reusing vars instead */\n    &::-webkit-slider-runnable-track {\n      ","\n    }\n    &::-moz-range-track {\n      ","\n    }\n    &::-moz-range-progress {\n      border-radius: 2px;\n      background-color: ",";\n    }\n    &::-ms-track {\n      height: ","px;\n      background: transparent;\n      border-color: transparent;\n      color: transparent;\n    }\n    &::-ms-fill-lower {\n      ","\n    }\n    &::-ms-fill-upper {\n      ","\n    }\n    &::-webkit-slider-thumb {\n      margin-top: -","px;\n      ","\n    }\n    &::-moz-range-thumb {\n      ","\n    }\n    &::-ms-thumb {\n      ",'\n    }\n    &:after {\n      content: "";\n      position: absolute;\n      display: block;\n      left: 0;\n      top: calc(50% - (',"px));\n      width: ","%;\n      height: ","px;\n      border-radius: ","px;\n      background-color: ",";\n      z-index: -1;\n    }\n  "])),28,(function(e){return e.theme.vstui.color.primary.getShade(6)}),k.trackStyles,k.trackStyles,(function(e){return e.theme.vstui.color.primary.getShade(6)}),4,k.trackStyles,k.trackStyles,10,k.thumbStyles,k.thumbStyles,k.thumbStyles,2,(function(e){return e.progressPercentage}),4,4,(function(e){return e.theme.vstui.color.primary.getShade(6)})),SliderContainer:O.default.div(c||(c=Object(h.a)(["\n    width: 100%;\n  "]))),SliderLabel:O.default.label(o||(o=Object(h.a)(["\n    font-weight: 500;\n    font-size: 1.5rem;\n    line-height: 1.8rem;\n    display: block;\n    margin-bottom: 7px;\n    color: ","; // match vstui select label\n  "])),x.ninja.getShade(11)),RangeContainer:O.default.div(l||(l=Object(h.a)(["\n    display: flex;\n    align-items: center;\n    padding: 0 ","px;\n    position: relative;\n  "])),8),IndicatorContainer:O.default.div(s||(s=Object(h.a)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n    width: ","px;\n    &:first-child {\n      margin-right: ","px;\n    }\n    &:last-child {\n      margin-left: ","px;\n    }\n  "])),x.cloud.getShade(9),18,14,14),IndicatorButton:O.default.button(d||(d=Object(h.a)(["\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    display: flex;\n    align-items: center;\n    height: 20px;\n    &:focus {\n      outline: 0;\n      border-radius: 2px;\n      box-shadow: rgb(255, 255, 255) 0 0 0 2px,\n        "," 0 0 0 4px;\n    }\n    svg {\n      overflow: visible;\n    }\n  "])),(function(e){return e.theme.vstui.color.primary.getShade(6)}))},C=function(e){var t=e.children,n=e.onClick,i=e.label;return Object(v.jsx)(y.IndicatorContainer,{children:Object(v.jsx)(y.IndicatorButton,{onClick:n,type:"button","aria-label":i,children:t})})};function S(e){return parseFloat(e.toFixed(2))}var M=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).inputId=Object(p.a)(),e.handleRangeIncrease=function(){var t,n;null===(t=(n=e.props).onIncrease)||void 0===t||t.call(n),e.getCorrectedValue()<e.props.max&&e.sendFakeEvent(e.props.step)},e.handleRangeDecrease=function(){var t,n;null===(t=(n=e.props).onDecrease)||void 0===t||t.call(n),e.getCorrectedValue()>e.props.min&&e.sendFakeEvent(-e.props.step)},e.handleRangeChange=function(t){var n,i;null===(n=(i=e.props).onChange)||void 0===n||n.call(i,parseFloat(t.currentTarget.value))},e}return Object(b.a)(n,[{key:"getCorrectedValue",value:function(){return S(this.props.value)}},{key:"sendFakeEvent",value:function(e){var t,n,i=this.getCorrectedValue()+e;null===(t=(n=this.props).onChange)||void 0===t||t.call(n,S(i))}},{key:"render",value:function(){var e=this.props,t=e.decreaseButtonLabel,n=e.increaseButtonLabel,i=e.label,r=e.labelWrappedWithTag,a=e.max,c=e.min,o=e.step,l=this.getCorrectedValue(),s=r,d=100*(l-c)/(a-c);return Object(v.jsxs)(y.SliderContainer,{children:[s?Object(v.jsx)(s,{children:Object(v.jsx)(y.SliderLabel,{htmlFor:this.inputId,children:i})}):Object(v.jsx)(y.SliderLabel,{htmlFor:this.inputId,children:i}),Object(v.jsxs)(y.RangeContainer,{children:[Object(v.jsx)(C,{onClick:this.handleRangeDecrease,label:t,children:Object(v.jsx)(m.MinusCircle,{})}),Object(v.jsx)(y.RangeInput,{id:this.inputId,max:a,min:c,onChange:this.handleRangeChange,progressPercentage:d,step:o,type:"range",value:l}),Object(v.jsx)(C,{onClick:this.handleRangeIncrease,label:n,children:Object(v.jsx)(m.PlusCircle,{})})]})]})}}]),n}(g.Component);t.a=M},62:function(e,t,n){"use strict";var i,r,a,c=n(9),o=n(44),l=n(42),s=n(0),d=n(1373),u=n(55),b=n(1),j=l.default.div(i||(i=Object(o.a)(["\n  overflow: visible;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: row;\n  width: 250px;\n  &:focus {\n    outline: 1px solid ",";\n  }\n  @keyframes loadingPulse {\n    0% {\n      transform: scale(1);\n    }\n    10% {\n      transform: scale(1.5);\n    }\n    20% {\n      transform: scale(2);\n    }\n    30% {\n      transform: scale(1.5);\n    }\n    40% {\n      transform: scale(1);\n    }\n  }\n  & div:first-child {\n    animation: loadingPulse 1.5s infinite linear;\n  }\n  & div:nth-child(2) {\n    animation: loadingPulse 1.5s 0.15s infinite linear;\n  }\n  & div:nth-child(3) {\n    animation: loadingPulse 1.5s 0.3s infinite linear;\n  }\n  & div:nth-child(4) {\n    animation: loadingPulse 1.5s 0.45s infinite linear;\n  }\n  & div:last-child {\n    animation: loadingPulse 1.5s 0.6s infinite linear;\n  }\n"])),Object(u.f)(6)),f=l.default.div(r||(r=Object(o.a)(["\n  height: ",";\n  width: ",";\n  border-radius: 100%;\n  margin: 0 ",";\n  background: ",";\n"])),(function(e){return"".concat(e.size,"px")}),(function(e){return"".concat(e.size,"px")}),(function(e){return"".concat(e.size*(10/18),"px")}),(function(e){return e.theme.vstui.color.primary.getShade(e.bgColor)})),h=function(e){var t=e.size,n=void 0===t?18:t,i=e.takeFocus,r=void 0!==i&&i,a=Object(d.a)(),c=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e;r&&(null===(e=c.current)||void 0===e||e.focus())}),[r]),Object(b.jsx)(j,{ref:c,tabIndex:r?0:void 0,"aria-label":a.formatMessage({id:"base.loading"}),children:[2,3,4,6,7].map((function(e){return Object(b.jsx)(f,{bgColor:e,size:n},"dot ".concat(e))}))})},g=l.default.div(a||(a=Object(o.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n"])));t.a=function(e){return Object(b.jsx)(g,{className:e.className,children:Object(b.jsx)(h,Object(c.a)({},e))})}},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(21),r=n(22),a=n(24),c=n(23),o=n(0),l=n.n(o),s=n(26),d=n.n(s),u=n(67),b=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=d.a.findDOMNode(this),t=Object(u.a)(e)[0];t&&t.focus()}},{key:"render",value:function(){return this.props.children}}]),n}(l.a.Component)}}]);
//# sourceMappingURL=3.2b79540a.chunk.js.map